<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Senior Connect - Login</title>

    <%- include("partials/fonts.ejs") %>
        <link rel="stylesheet" href="/profile.css" />
</head>

<body class="content">
  
  <%- include('partials/navbar.ejs') %>
    <div id="loginModal">
        <h2>Profile / Login</h2>

        <input id="username" type="text" placeholder="Username" autocomplete="username" />
        <input id="password" type="password" placeholder="Password" autocomplete="current-password" />
        <button id="loginSubmit">Login</button>

        <a href="/"> &lt- Back to Game</a> <!-- &lt is the named entity for < -->
    </div>

    <script>
        document.getElementById("loginSubmit").onclick = async () => {
            const username = document.getElementById("username").value.trim();
            const password = document.getElementById("password").value;

            if (!username || !password) {
                alert("Please enter username and password");
                return;
            }

            const res = await fetch("/login", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ username, password })
            });

            const data = await res.json();

            if (data.success) {
                window.location.href = "/";
            } else {
                alert("Login failed");
            }
        };

        function setTimeBasedBackground(content) {
            const hour = new Date().getHours();
            let bg, greeting, textcol = '#333';

            if (hour >= 6 && hour < 12) {
                bg = 'linear-gradient(to top,#fdebd0,#f6ddcc,#fad7a0)';
            } else if (hour >= 12 && hour < 18) {
                bg = 'linear-gradient(to top,#ffd89b,#ffb347)';
            } else if (hour >= 18 && hour < 20) {
                bg = 'linear-gradient(to top,#f6a98f,#f28e63)';
            } else {
                bg = 'linear-gradient(to top,#2c3e50,#34495e)';
                textcol = 'white';
            }

            document.body.style.background = bg;
        }

        document.addEventListener("DOMContentLoaded", () => {
            if (window.location.pathname === "/profile") {
                setTimeBasedBackground({});
            }
        });
    </script>

</body>

</html>